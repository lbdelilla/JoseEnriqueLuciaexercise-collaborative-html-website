{"filter":false,"title":"html-template-engine.js","tooltip":"/src/html-template-engine.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":78,"column":5},"action":"remove","lines":["export default (function(){","    ","    var theObject = {};","    theObject.settings = {","        basePath: '',","        logRequests: false,","        windowExport: false,","        loadProperty: function(property,fromObject){","            let value = null;","            if(typeof(fromObject) !== 'undefined'){","                value = fromObject[property];","            } ","            else value = property;","            ","            if(value === \"false\") value = false;","            if(typeof(value)!==undefined && value) this[property] = value;","        }","    };","    ","    ","    function loadSettings(newSettings){","        theObject.settings.loadProperty('basePath',newSettings);","        theObject.settingswperty('logRequests',newSettings);","        theObject.settings.loadProperty('windowExport',newSettings);","    }","    ","    theObject.loadPieces = function(pieces, newSettings){","        ","        loadSettings(newSettings);","        ","        if(theObject.settings.logRequests && pieces.length === 0) console.warn(\"No template parts were found or loaded, make sure you are using <span> tags with the 'require-file' attribute\");","        ","        pieces.forEach((piece)=>{","            getTemplate(piece.filePath, function(fileContent){","                if(typeof(piece.elementId) !== 'undefined') document.querySelector(piece.elementId).innerHTML = fileContent; ","                else if(typeof(piece.element) !== 'undefined') piece.element.innerHTML = fileContent;","                else console.error('Error loading the template part: ', piece);","            });","        });","    }","    ","    ","    function getTemplate(path, successCallback)","    {","        path = theObject.settings.basePath+path;","        var ajax = new XMLHttpRequest();","        ajax.open(\"GET\", path, true);","        ajax.addEventListener('load',(response) => {","            if (ajax.readyState == 4 && ajax.status == 200) {","                if(theObject.settings.logRequests) console.log('The following path was successfully loaded: '+path);","                successCallback(ajax.responseText);","            }","            else if(ajax.status == 404) console.error('The following template path was not found: '+path);","            else if(ajax.status != 200) console.warn('There was an issue loading the following template path: '+path);","        });","        ajax.addEventListener('error',() => {","             console.error('The following template path was imposible to load: '+path);","        });","        ajax.send();","    }","    ","    theObject.start = function(){","            ","        let pieces = document.querySelectorAll('span[require-file]');","        let newPieces = [];","        pieces.forEach(function(elm){","           newPieces.push({ element: elm, filePath: elm.getAttribute('require-file')});","        });","        ","        const body = document.querySelector('body');","        const settings = {","            basePath: body.getAttribute('base-template-path'),","            logRequests: body.getAttribute('log-template-requests')","        }","        ","        theObject.loadPieces(newPieces, settings);","    }","    return theObject;","})();"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":78,"column":5},"action":"insert","lines":["export default (function(){","    ","    var theObject = {};","    theObject.settings = {","        basePath: '',","        logRequests: false,","        windowExport: false,","        loadProperty: function(property,fromObject){","            let value = null;","            if(typeof(fromObject) !== 'undefined'){","                value = fromObject[property];","            } ","            else value = property;","            ","            if(value === \"false\") value = false;","            if(typeof(value)!==undefined && value) this[property] = value;","        }","    };","    ","    ","    function loadSettings(newSettings){","        theObject.settings.loadProperty('basePath',newSettings);","        theObject.settingswperty('logRequests',newSettings);","        theObject.settings.loadProperty('windowExport',newSettings);","    }","    ","    theObject.loadPieces = function(pieces, newSettings){","        ","        loadSettings(newSettings);","        ","        if(theObject.settings.logRequests && pieces.length === 0) console.warn(\"No template parts were found or loaded, make sure you are using <span> tags with the 'require-file' attribute\");","        ","        pieces.forEach((piece)=>{","            getTemplate(piece.filePath, function(fileContent){","                if(typeof(piece.elementId) !== 'undefined') document.querySelector(piece.elementId).innerHTML = fileContent; ","                else if(typeof(piece.element) !== 'undefined') piece.element.innerHTML = fileContent;","                else console.error('Error loading the template part: ', piece);","            });","        });","    }","    ","    ","    function getTemplate(path, successCallback)","    {","        path = theObject.settings.basePath+path;","        var ajax = new XMLHttpRequest();","        ajax.open(\"GET\", path, true);","        ajax.addEventListener('load',(response) => {","            if (ajax.readyState == 4 && ajax.status == 200) {","                if(theObject.settings.logRequests) console.log('The following path was successfully loaded: '+path);","                successCallback(ajax.responseText);","            }","            else if(ajax.status == 404) console.error('The following template path was not found: '+path);","            else if(ajax.status != 200) console.warn('There was an issue loading the following template path: '+path);","        });","        ajax.addEventListener('error',() => {","             console.error('The following template path was imposible to load: '+path);","        });","        ajax.send();","    }","    ","    theObject.start = function(){","            ","        let pieces = document.querySelectorAll('span[require-file]');","        let newPieces = [];","        pieces.forEach(function(elm){","           newPieces.push({ element: elm, filePath: elm.getAttribute('require-file')});","        });","        ","        const body = document.querySelector('body');","        const settings = {","            basePath: body.getAttribute('base-template-path'),","            logRequests: body.getAttribute('log-template-requests')","        }","        ","        theObject.loadPieces(newPieces, settings);","    }","    return theObject;","})();"],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":27},"end":{"row":5,"column":27},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1521665920524,"hash":"b7c4df5635af22a13675c558d743fa87f61a3c60"}